---
ms.date: 09/13/2016
ms.topic: reference
title: Solicitar confirmação por meio de cmdlets
description: Solicitar confirmação por meio de cmdlets
ms.openlocfilehash: fd869d50b185cb4d38269640df58ec284a32da50
ms.sourcegitcommit: ba7315a496986451cfc1296b659d73ea2373d3f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/10/2020
ms.locfileid: "92646408"
---
# <a name="requesting-confirmation-from-cmdlets"></a><span data-ttu-id="69126-103">Solicitar confirmação por meio de cmdlets</span><span class="sxs-lookup"><span data-stu-id="69126-103">Requesting Confirmation from Cmdlets</span></span>

<span data-ttu-id="69126-104">Os cmdlets devem solicitar confirmação quando estão prestes a fazer uma alteração no sistema que está fora do ambiente do Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="69126-104">Cmdlets should request confirmation when they are about to make a change to the system that is outside of the Windows PowerShell environment.</span></span> <span data-ttu-id="69126-105">Por exemplo, se um cmdlet estiver prestes a adicionar uma conta de usuário ou parar um processo, o cmdlet deverá exigir confirmação do usuário antes de continuar.</span><span class="sxs-lookup"><span data-stu-id="69126-105">For example, if a cmdlet is about to add a user account or stop a process, the cmdlet should require confirmation from the user before it proceeds.</span></span> <span data-ttu-id="69126-106">Por outro lado, se um cmdlet estiver prestes a alterar uma variável do Windows PowerShell, o cmdlet não precisará exigir confirmação.</span><span class="sxs-lookup"><span data-stu-id="69126-106">In contrast, if a cmdlet is about to change a Windows PowerShell variable, the cmdlet does not need to require confirmation.</span></span>

<span data-ttu-id="69126-107">Para fazer uma solicitação de confirmação, o cmdlet deve indicar que ele dá suporte a solicitações de confirmação e deve chamar os métodos [System. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) e [System. Management. Automation. cmdlet. ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) (opcional) para exibir uma mensagem de solicitação de confirmação.</span><span class="sxs-lookup"><span data-stu-id="69126-107">In order to make a confirmation request, the cmdlet must indicate that it supports confirmation requests, and it must call the [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) and [System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) (optional) methods to display a confirmation request message.</span></span>

## <a name="supporting-confirmation-requests"></a><span data-ttu-id="69126-108">Suporte a solicitações de confirmação</span><span class="sxs-lookup"><span data-stu-id="69126-108">Supporting Confirmation Requests</span></span>

<span data-ttu-id="69126-109">Para dar suporte a solicitações de confirmação, o cmdlet deve definir o `SupportsShouldProcess` parâmetro do atributo de cmdlet como `true` .</span><span class="sxs-lookup"><span data-stu-id="69126-109">To support confirmation requests, the cmdlet must set the `SupportsShouldProcess` parameter of the Cmdlet attribute to `true`.</span></span> <span data-ttu-id="69126-110">Isso habilita os `Confirm` `WhatIf` parâmetros do cmdlet e que são fornecidos pelo Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="69126-110">This enables the `Confirm` and `WhatIf` cmdlet parameters that are provided by Windows PowerShell.</span></span> <span data-ttu-id="69126-111">O `Confirm` parâmetro permite que o usuário controle se a solicitação de confirmação é exibida.</span><span class="sxs-lookup"><span data-stu-id="69126-111">The `Confirm` parameter allows the user to control whether the confirmation request is displayed.</span></span> <span data-ttu-id="69126-112">O `WhatIf` parâmetro permite que o usuário determine se o cmdlet deve exibir uma mensagem ou executar sua ação.</span><span class="sxs-lookup"><span data-stu-id="69126-112">The `WhatIf` parameter allows the user to determine whether the cmdlet should display a message or perform its action.</span></span> <span data-ttu-id="69126-113">Não adicione manualmente os `Confirm` parâmetros e `WhatIf` a um cmdlet.</span><span class="sxs-lookup"><span data-stu-id="69126-113">Do not manually add the `Confirm` and `WhatIf` parameters to a cmdlet.</span></span>

<span data-ttu-id="69126-114">O exemplo a seguir mostra uma declaração de atributo de cmdlet que dá suporte a solicitações de confirmação.</span><span class="sxs-lookup"><span data-stu-id="69126-114">The following example shows a Cmdlet attribute declaration that supports confirmation requests.</span></span>

```csharp
[Cmdlet(VerbsDiagnostic.Test, "RequestConfirmationTemplate1",
        SupportsShouldProcess = true)]
```

## <a name="calling-the-confirmation-request-methods"></a><span data-ttu-id="69126-115">Chamando os métodos de solicitação de confirmação</span><span class="sxs-lookup"><span data-stu-id="69126-115">Calling the Confirmation request methods</span></span>

<span data-ttu-id="69126-116">No código do cmdlet, chame o método [System. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) antes que a operação que altera o sistema seja executada.</span><span class="sxs-lookup"><span data-stu-id="69126-116">In the cmdlet code, call the [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method before the operation that changes the system is performed.</span></span> <span data-ttu-id="69126-117">Projete o cmdlet para que, se a chamada retornar um valor `false` , a operação não seja executada e o cmdlet processe a próxima operação.</span><span class="sxs-lookup"><span data-stu-id="69126-117">Design the cmdlet so that if the call returns a value of `false`, the operation is not performed, and the cmdlet processes the next operation.</span></span>

## <a name="calling-the-shouldcontinue-method"></a><span data-ttu-id="69126-118">Chamando o método ShouldContinue</span><span class="sxs-lookup"><span data-stu-id="69126-118">Calling the ShouldContinue Method</span></span>

<span data-ttu-id="69126-119">A maioria dos cmdlets solicita confirmação usando apenas o método [System. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) .</span><span class="sxs-lookup"><span data-stu-id="69126-119">Most cmdlets request confirmation using only the [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method.</span></span> <span data-ttu-id="69126-120">No entanto, alguns casos podem exigir confirmação adicional.</span><span class="sxs-lookup"><span data-stu-id="69126-120">However, some cases might require additional confirmation.</span></span> <span data-ttu-id="69126-121">Nesses casos, complemente a chamada [System. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) com uma chamada para o método [System. Management. Automation. cmdlet. ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) .</span><span class="sxs-lookup"><span data-stu-id="69126-121">For these cases, supplement the [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) call with a call to the [System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) method.</span></span> <span data-ttu-id="69126-122">Isso permite que o cmdlet ou o provedor controle mais minuciosamente o escopo do **Sim para todas as** respostas ao prompt de confirmação.</span><span class="sxs-lookup"><span data-stu-id="69126-122">This allows the cmdlet or provider to more finely control the scope of the **Yes to all** response to the confirmation prompt.</span></span>

<span data-ttu-id="69126-123">Se um cmdlet chama o método [System. Management. Automation. cmdlet. ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) , o cmdlet também deve fornecer um `Force` parâmetro switch.</span><span class="sxs-lookup"><span data-stu-id="69126-123">If a cmdlet calls the [System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) method, the cmdlet must also provide a `Force` switch parameter.</span></span> <span data-ttu-id="69126-124">Se o usuário especificar `Force` quando o usuário invoca o cmdlet, o cmdlet ainda deve chamar [System. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess), mas deve ignorar a chamada para [System. Management. Automation. cmdlet. ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span><span class="sxs-lookup"><span data-stu-id="69126-124">If the user specifies `Force` when the user invokes the cmdlet, the cmdlet should still call [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess), but it should bypass the call to [System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span></span>

<span data-ttu-id="69126-125">[System. Management. Automation. cmdlet. ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) gerará uma exceção quando for chamado a partir de um ambiente não interativo em que o usuário não pode ser solicitado.</span><span class="sxs-lookup"><span data-stu-id="69126-125">[System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue) will throw an exception when it is called from a non-interactive environment where the user cannot be prompted.</span></span> <span data-ttu-id="69126-126">A adição de um `Force` parâmetro garante que o comando ainda possa ser executado quando for invocado em um ambiente não interativo.</span><span class="sxs-lookup"><span data-stu-id="69126-126">Adding a `Force` parameter ensures that the command can still be performed when it is invoked in a non-interactive environment.</span></span>

<span data-ttu-id="69126-127">O exemplo a seguir mostra como chamar [System. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) e [System. Management. Automation. cmdlet. ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span><span class="sxs-lookup"><span data-stu-id="69126-127">The following example shows how to call [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) and [System.Management.Automation.Cmdlet.ShouldContinue](/dotnet/api/System.Management.Automation.Cmdlet.ShouldContinue).</span></span>

```csharp
if (ShouldProcess (...) )
{
  if (Force || ShouldContinue(...))
  {
     // Add code that performs the operation.
  }
}
```

<span data-ttu-id="69126-128">O comportamento de uma chamada [System. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) pode variar dependendo do ambiente no qual o cmdlet é invocado.</span><span class="sxs-lookup"><span data-stu-id="69126-128">The behavior of a [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) call can vary depending on the environment in which the cmdlet is invoked.</span></span> <span data-ttu-id="69126-129">Usar as diretrizes anteriores ajudará a garantir que o cmdlet se comporta de forma consistente com outros cmdlets, independentemente do ambiente de host.</span><span class="sxs-lookup"><span data-stu-id="69126-129">Using the previous guidelines will help ensure that the cmdlet behaves consistently with other cmdlets, regardless of the host environment.</span></span>

<span data-ttu-id="69126-130">Para obter um exemplo de como chamar o método [System. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) , consulte [como solicitar confirmações](./how-to-request-confirmations.md).</span><span class="sxs-lookup"><span data-stu-id="69126-130">For an example of calling the [System.Management.Automation.Cmdlet.ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method, see [How to Request Confirmations](./how-to-request-confirmations.md).</span></span>

## <a name="specify-the-impact-level"></a><span data-ttu-id="69126-131">Especificar o nível de impacto</span><span class="sxs-lookup"><span data-stu-id="69126-131">Specify the Impact Level</span></span>

<span data-ttu-id="69126-132">Ao criar o cmdlet, especifique o nível de impacto (a severidade) da alteração.</span><span class="sxs-lookup"><span data-stu-id="69126-132">When you create the cmdlet, specify the impact level (the severity) of the change.</span></span> <span data-ttu-id="69126-133">Para fazer isso, defina o valor do `ConfirmImpact` parâmetro do atributo cmdlet como alto, médio ou baixo.</span><span class="sxs-lookup"><span data-stu-id="69126-133">To do this, set the value of the `ConfirmImpact` parameter of the Cmdlet attribute to High, Medium, or Low.</span></span> <span data-ttu-id="69126-134">Você pode especificar um valor `ConfirmImpact` somente para quando também especificar o `SupportsShouldProcess` parâmetro para o cmdlet.</span><span class="sxs-lookup"><span data-stu-id="69126-134">You can specify a value for `ConfirmImpact` only when you also specify the `SupportsShouldProcess` parameter for the cmdlet.</span></span>

<span data-ttu-id="69126-135">Para a maioria dos cmdlets, você não precisa especificar explicitamente `ConfirmImpact` .</span><span class="sxs-lookup"><span data-stu-id="69126-135">For most cmdlets, you do not have to explicitly specify `ConfirmImpact`.</span></span>  <span data-ttu-id="69126-136">Em vez disso, use a configuração padrão do parâmetro, que é médio.</span><span class="sxs-lookup"><span data-stu-id="69126-136">Instead, use the default setting of the parameter, which is Medium.</span></span> <span data-ttu-id="69126-137">Se você definir `ConfirmImpact` como alto, a operação será confirmada por padrão.</span><span class="sxs-lookup"><span data-stu-id="69126-137">If you set `ConfirmImpact` to High, the operation will be confirmed by default.</span></span> <span data-ttu-id="69126-138">Reserve essa configuração para ações altamente perturbadoras, como reformatar um volume de disco rígido.</span><span class="sxs-lookup"><span data-stu-id="69126-138">Reserve this setting for highly disruptive actions, such as reformatting a hard-disk volume.</span></span>

## <a name="calling-non-confirmation-methods"></a><span data-ttu-id="69126-139">Chamando métodos que não são de confirmação</span><span class="sxs-lookup"><span data-stu-id="69126-139">Calling Non-Confirmation Methods</span></span>

<span data-ttu-id="69126-140">Se o cmdlet ou o provedor precisar enviar uma mensagem, mas não a confirmação de solicitação, ele poderá chamar os três métodos a seguir.</span><span class="sxs-lookup"><span data-stu-id="69126-140">If the cmdlet or provider must send a message but not request confirmation, it can call the following three methods.</span></span> <span data-ttu-id="69126-141">Evite usar o método [System. Management. Automation. cmdlet. WriteObject](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) para enviar mensagens desses tipos porque a saída de [System. Management. Automation. cmdlet. WriteObject](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) é mesclada com a saída normal do seu cmdlet ou provedor, o que dificulta a gravação do script.</span><span class="sxs-lookup"><span data-stu-id="69126-141">Avoid using the [System.Management.Automation.Cmdlet.WriteObject](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) method to send messages of these types because [System.Management.Automation.Cmdlet.WriteObject](/dotnet/api/System.Management.Automation.Cmdlet.WriteObject) output is intermingled with the normal output of your cmdlet or provider, which makes script writing difficult.</span></span>

- <span data-ttu-id="69126-142">Para ter cuidado com o usuário e continuar com a operação, o cmdlet ou o provedor pode chamar o método [System. Management. Automation. cmdlet. WriteWarning](/dotnet/api/System.Management.Automation.Cmdlet.WriteWarning) .</span><span class="sxs-lookup"><span data-stu-id="69126-142">To caution the user and continue with the operation, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.WriteWarning](/dotnet/api/System.Management.Automation.Cmdlet.WriteWarning) method.</span></span>

- <span data-ttu-id="69126-143">Para fornecer informações adicionais que o usuário pode recuperar usando o `Verbose` parâmetro, o cmdlet ou o provedor pode chamar o método [System. Management. Automation. cmdlet. WriteVerbose](/dotnet/api/System.Management.Automation.Cmdlet.WriteVerbose) .</span><span class="sxs-lookup"><span data-stu-id="69126-143">To provide additional information that the user can retrieve using the `Verbose` parameter, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.WriteVerbose](/dotnet/api/System.Management.Automation.Cmdlet.WriteVerbose) method.</span></span>

- <span data-ttu-id="69126-144">Para fornecer detalhes de nível de depuração para outros desenvolvedores ou para o suporte do produto, o cmdlet ou o provedor pode chamar o método [System. Management. Automation. cmdlet. WriteDebug](/dotnet/api/System.Management.Automation.Cmdlet.WriteDebug) .</span><span class="sxs-lookup"><span data-stu-id="69126-144">To provide debugging-level detail for other developers or for product support, the cmdlet or provider can call the [System.Management.Automation.Cmdlet.WriteDebug](/dotnet/api/System.Management.Automation.Cmdlet.WriteDebug) method.</span></span> <span data-ttu-id="69126-145">O usuário pode recuperar essas informações usando o `Debug` parâmetro.</span><span class="sxs-lookup"><span data-stu-id="69126-145">The user can retrieve this information using the `Debug` parameter.</span></span>

<span data-ttu-id="69126-146">Os cmdlets e os provedores primeiro chamam os seguintes métodos para solicitar confirmação antes de tentarem executar uma operação que altera um sistema fora do Windows PowerShell:</span><span class="sxs-lookup"><span data-stu-id="69126-146">Cmdlets and providers first call the following methods to request confirmation before they attempt to perform an operation that changes a system outside of Windows PowerShell:</span></span>

- [<span data-ttu-id="69126-147">System. Management. Automation. cmdlet. ShouldProcess</span><span class="sxs-lookup"><span data-stu-id="69126-147">System.Management.Automation.Cmdlet.Shouldprocess</span></span>](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess)

- [<span data-ttu-id="69126-148">System. Management. Automation. Provider. Cmdletprovider. ShouldProcess</span><span class="sxs-lookup"><span data-stu-id="69126-148">System.Management.Automation.Provider.Cmdletprovider.Shouldprocess</span></span>](/dotnet/api/System.Management.Automation.Provider.CmdletProvider.ShouldProcess)

<span data-ttu-id="69126-149">Eles fazem isso chamando o método [System. Management. Automation. cmdlet. ShouldProcess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) , que solicita ao usuário que confirme a operação com base em como o usuário invocou o comando.</span><span class="sxs-lookup"><span data-stu-id="69126-149">They do so by calling the [System.Management.Automation.Cmdlet.Shouldprocess](/dotnet/api/System.Management.Automation.Cmdlet.ShouldProcess) method, which prompts the user to confirm the operation based on how the user invoked the command.</span></span>

## <a name="see-also"></a><span data-ttu-id="69126-150">Consulte Também</span><span class="sxs-lookup"><span data-stu-id="69126-150">See Also</span></span>

[<span data-ttu-id="69126-151">Escrevendo um Cmdlet do Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="69126-151">Writing a Windows PowerShell Cmdlet</span></span>](./writing-a-windows-powershell-cmdlet.md)
