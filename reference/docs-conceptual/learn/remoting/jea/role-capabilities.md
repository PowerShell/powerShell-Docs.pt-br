---
ms.date: 07/10/2019
keywords: jea,powershell,segurança
title: Recursos de Função JEA
description: Uma capacidade de função é um arquivo de dados do PowerShell com a extensão .psrc que lista todos os cmdlets, as funções, os provedores e os programas externos que devem ser disponibilizados para os usuários que estão se conectando.
ms.openlocfilehash: 233d9081f4a8f977f0959addb5573c4566f885d0
ms.sourcegitcommit: ba7315a496986451cfc1296b659d73ea2373d3f0
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 12/10/2020
ms.locfileid: "92499987"
---
# <a name="jea-role-capabilities"></a><span data-ttu-id="5eba1-104">Recursos de Função JEA</span><span class="sxs-lookup"><span data-stu-id="5eba1-104">JEA Role Capabilities</span></span>

<span data-ttu-id="5eba1-105">Ao criar um ponto de extremidade JEA, é necessário definir uma ou mais capacidades de função que descrevam o que alguém pode fazer em uma sessão JEA.</span><span class="sxs-lookup"><span data-stu-id="5eba1-105">When creating a JEA endpoint, you need to define one or more role capabilities that describe what someone can do in a JEA session.</span></span> <span data-ttu-id="5eba1-106">Uma capacidade de função é um arquivo de dados do PowerShell com a extensão `.psrc` que lista todos os cmdlets, as funções, os provedores e os programas externos que devem ser disponibilizados para os usuários que estão se conectando.</span><span class="sxs-lookup"><span data-stu-id="5eba1-106">A role capability is a PowerShell data file with the `.psrc` extension that lists all the cmdlets, functions, providers, and external programs that are made available to connecting users.</span></span>

## <a name="determine-which-commands-to-allow"></a><span data-ttu-id="5eba1-107">Determinar quais comandos permitir</span><span class="sxs-lookup"><span data-stu-id="5eba1-107">Determine which commands to allow</span></span>

<span data-ttu-id="5eba1-108">A primeira etapa na criação de um arquivo de capacidade de função é considerar o que os usuários precisam acessar.</span><span class="sxs-lookup"><span data-stu-id="5eba1-108">The first step in creating a role capability file is to consider what the users need access to.</span></span> <span data-ttu-id="5eba1-109">O processo de coleta de requisitos pode levar algum tempo, mas é um processo importante.</span><span class="sxs-lookup"><span data-stu-id="5eba1-109">The requirements gathering process can take a while, but it's an important process.</span></span> <span data-ttu-id="5eba1-110">Conceder aos usuários acesso a poucos cmdlets e funções pode impedi-los de cumprir suas tarefas.</span><span class="sxs-lookup"><span data-stu-id="5eba1-110">Giving users access to too few cmdlets and functions can prevent them from getting their job done.</span></span> <span data-ttu-id="5eba1-111">Permitir acesso a muitos cmdlets e muitas funções pode permitir que os usuários façam mais do que você pretendia e enfraquecer sua postura de segurança.</span><span class="sxs-lookup"><span data-stu-id="5eba1-111">Allowing access to too many cmdlets and functions can allow users to do more than you intended and weaken your security stance.</span></span>

<span data-ttu-id="5eba1-112">Como você efetuará esse processo depende de suas metas e da organização.</span><span class="sxs-lookup"><span data-stu-id="5eba1-112">How you go about this process depends on your organization and goals.</span></span> <span data-ttu-id="5eba1-113">As dicas a seguir podem ajudar a garantir que você está no caminho certo.</span><span class="sxs-lookup"><span data-stu-id="5eba1-113">The following tips can help ensure you're on the right path.</span></span>

1. <span data-ttu-id="5eba1-114">**Identificar** os comandos que os usuários estão usando para executar seus trabalhos.</span><span class="sxs-lookup"><span data-stu-id="5eba1-114">**Identify** the commands users are using to get their jobs done.</span></span> <span data-ttu-id="5eba1-115">Isso pode envolver a pesquisa da equipe de TI, a verificação de scripts de automação ou a análise de transcrições e logs de sessão do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="5eba1-115">This may involve surveying IT staff, checking automation scripts, or analyzing PowerShell session transcripts and logs.</span></span>
2. <span data-ttu-id="5eba1-116">**Atualize** o uso das ferramentas de linha de comando para equivalentes do PowerShell, sempre que possível, para uma melhor experiência de auditoria e personalização do JEA.</span><span class="sxs-lookup"><span data-stu-id="5eba1-116">**Update** use of command-line tools to PowerShell equivalents, where possible, for the best auditing and JEA customization experience.</span></span> <span data-ttu-id="5eba1-117">Os programas externos não podem ser restritos de forma tão granular como os cmdlets e as funções nativas do PowerShell no JEA.</span><span class="sxs-lookup"><span data-stu-id="5eba1-117">External programs can't be constrained as granularly as native PowerShell cmdlets and functions in JEA.</span></span>
3. <span data-ttu-id="5eba1-118">**Restrinja** o escopo dos cmdlets para permitir apenas parâmetros ou valores de parâmetro específicos.</span><span class="sxs-lookup"><span data-stu-id="5eba1-118">**Restrict** the scope of the cmdlets to only allow specific parameters or parameter values.</span></span> <span data-ttu-id="5eba1-119">Isso é especialmente importante se os usuários precisam gerenciar apenas uma parte de um sistema.</span><span class="sxs-lookup"><span data-stu-id="5eba1-119">This is especially important if users should manage only part of a system.</span></span>
4. <span data-ttu-id="5eba1-120">**Crie** funções personalizadas para substituir comandos complexos ou comandos que são difíceis de restringir no JEA.</span><span class="sxs-lookup"><span data-stu-id="5eba1-120">**Create** custom functions to replace complex commands or commands that are difficult to constrain in JEA.</span></span> <span data-ttu-id="5eba1-121">Uma função simples que encapsula um comando complexo ou que aplica lógica de validação adicional pode oferecer controle adicional para administradores e simplicidade para usuários finais.</span><span class="sxs-lookup"><span data-stu-id="5eba1-121">A simple function that wraps a complex command or applies additional validation logic can offer additional control for admins and end-user simplicity.</span></span>
5. <span data-ttu-id="5eba1-122">**Teste** a lista de escopo de comandos permitidos com seus usuários ou seus serviços de automação e ajuste-a conforme necessário.</span><span class="sxs-lookup"><span data-stu-id="5eba1-122">**Test** the scoped list of allowable commands with your users or automation services, and adjust as necessary.</span></span>

### <a name="examples-of-potentially-dangerous-commands"></a><span data-ttu-id="5eba1-123">Exemplos de comandos potencialmente perigosos</span><span class="sxs-lookup"><span data-stu-id="5eba1-123">Examples of potentially dangerous commands</span></span>

<span data-ttu-id="5eba1-124">Uma seleção cuidadosa de comandos é importante para garantir que o ponto de extremidade JEA não permita que o usuário eleve suas permissões.</span><span class="sxs-lookup"><span data-stu-id="5eba1-124">Careful selection of commands is important to ensure the JEA endpoint doesn't allow the user to elevate their permissions.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="5eba1-125">As informações essenciais necessárias para os successCommands do usuário em uma sessão JEA são geralmente executadas com privilégios elevados.</span><span class="sxs-lookup"><span data-stu-id="5eba1-125">Essential information required for user successCommands in a JEA session are often run with elevated privileges.</span></span>

<span data-ttu-id="5eba1-126">A tabela a seguir contém exemplos de comandos que poderão ser usados maliciosamente se forem permitidos em um estado irrestrito.</span><span class="sxs-lookup"><span data-stu-id="5eba1-126">The following table contains examples of commands that can be used maliciously if allowed in an unconstrained state.</span></span> <span data-ttu-id="5eba1-127">Essa não é uma lista completa e só deve ser usada como um ponto de partida preventivo.</span><span class="sxs-lookup"><span data-stu-id="5eba1-127">This isn't an exhaustive list and should only be used as a cautionary starting point.</span></span>

|                                            <span data-ttu-id="5eba1-128">Risco</span><span class="sxs-lookup"><span data-stu-id="5eba1-128">Risk</span></span>                                            |                                <span data-ttu-id="5eba1-129">Exemplo</span><span class="sxs-lookup"><span data-stu-id="5eba1-129">Example</span></span>                                |                                                                              <span data-ttu-id="5eba1-130">Comandos relacionados</span><span class="sxs-lookup"><span data-stu-id="5eba1-130">Related commands</span></span>                                                                              |
| ------------------------------------------------------------------------------------------ | --------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <span data-ttu-id="5eba1-131">Concedendo privilégios de administrador ao usuário que está se conectando, para ignorar o JEA</span><span class="sxs-lookup"><span data-stu-id="5eba1-131">Granting the connecting user admin privileges to bypass JEA</span></span>                                | `Add-LocalGroupMember -Member 'CONTOSO\jdoe' -Group 'Administrators'` | <span data-ttu-id="5eba1-132">`Add-ADGroupMember`, `Add-LocalGroupMember`, `net.exe`, `dsadd.exe`</span><span class="sxs-lookup"><span data-stu-id="5eba1-132">`Add-ADGroupMember`, `Add-LocalGroupMember`, `net.exe`, `dsadd.exe`</span></span>                                                                                                        |
| <span data-ttu-id="5eba1-133">Execução de código arbitrário, como malware, explorações ou scripts personalizados para ignorar proteções</span><span class="sxs-lookup"><span data-stu-id="5eba1-133">Running arbitrary code, such as malware, exploits, or custom scripts to bypass protections</span></span> | `Start-Process -FilePath '\\san\share\malware.exe'`                   | <span data-ttu-id="5eba1-134">`Start-Process`, `New-Service`, `Invoke-Item`, `Invoke-WmiMethod`, `Invoke-CimMethod`, `Invoke-Expression`, `Invoke-Command`, `New-ScheduledTask`, `Register-ScheduledJob`</span><span class="sxs-lookup"><span data-stu-id="5eba1-134">`Start-Process`, `New-Service`, `Invoke-Item`, `Invoke-WmiMethod`, `Invoke-CimMethod`, `Invoke-Expression`, `Invoke-Command`, `New-ScheduledTask`, `Register-ScheduledJob`</span></span> |

## <a name="create-a-role-capability-file"></a><span data-ttu-id="5eba1-135">Criar um arquivo de capacidade de função</span><span class="sxs-lookup"><span data-stu-id="5eba1-135">Create a role capability file</span></span>

<span data-ttu-id="5eba1-136">Você pode criar um novo arquivo de capacidade de função do PowerShell com o cmdlet [New-PSRoleCapabilityFile](/powershell/module/microsoft.powershell.core/new-psrolecapabilityfile).</span><span class="sxs-lookup"><span data-stu-id="5eba1-136">You can create a new PowerShell role capability file with the [New-PSRoleCapabilityFile](/powershell/module/microsoft.powershell.core/new-psrolecapabilityfile) cmdlet.</span></span>

```powershell
New-PSRoleCapabilityFile -Path .\MyFirstJEARole.psrc
```

<span data-ttu-id="5eba1-137">O arquivo de capacidade de função resultante deve ser editado para permitir os comandos necessários para a função.</span><span class="sxs-lookup"><span data-stu-id="5eba1-137">The resulting role capability file should be edited to allow the commands required for the role.</span></span> <span data-ttu-id="5eba1-138">A documentação de ajuda do PowerShell contém vários exemplos de como você pode configurar o arquivo.</span><span class="sxs-lookup"><span data-stu-id="5eba1-138">The PowerShell help documentation contains several examples of how you can configure the file.</span></span>

### <a name="allowing-powershell-cmdlets-and-functions"></a><span data-ttu-id="5eba1-139">Permitir cmdlets e funções do PowerShell</span><span class="sxs-lookup"><span data-stu-id="5eba1-139">Allowing PowerShell cmdlets and functions</span></span>

<span data-ttu-id="5eba1-140">Para autorizar usuários a executar funções ou cmdlets do PowerShell, adicione o nome do cmdlet ou da função nos campos VisibleCmdlets ou VisibleFunctions.</span><span class="sxs-lookup"><span data-stu-id="5eba1-140">To authorize users to run PowerShell cmdlets or functions, add the cmdlet or function name to the VisibleCmdlets or VisibleFunctions fields.</span></span> <span data-ttu-id="5eba1-141">Se você não tiver certeza se um comando é um cmdlet ou uma função, execute `Get-Command <name>` e verifique a propriedade **CommandType** na saída.</span><span class="sxs-lookup"><span data-stu-id="5eba1-141">If you aren't sure whether a command is a cmdlet or function, you can run `Get-Command <name>` and check the **CommandType** property in the output.</span></span>

```powershell
VisibleCmdlets = 'Restart-Computer', 'Get-NetIPAddress'
```

<span data-ttu-id="5eba1-142">Às vezes, o escopo de um cmdlet ou de uma função específica é muito amplo para as necessidades dos usuários.</span><span class="sxs-lookup"><span data-stu-id="5eba1-142">Sometimes the scope of a specific cmdlet or function is too broad for your users' needs.</span></span> <span data-ttu-id="5eba1-143">Um administrador de DNS, por exemplo, provavelmente só precisa de acesso para reiniciar o serviço DNS.</span><span class="sxs-lookup"><span data-stu-id="5eba1-143">A DNS admin, for example, probably only needs access to restart the DNS service.</span></span> <span data-ttu-id="5eba1-144">Em ambientes de multilocatário, os locatários têm acesso a ferramentas de gerenciamento de autoatendimento.</span><span class="sxs-lookup"><span data-stu-id="5eba1-144">In multi-tenant environments, tenants have access to self-service management tools.</span></span> <span data-ttu-id="5eba1-145">Os locatários devem ser limitados ao gerenciamento de seus próprios recursos.</span><span class="sxs-lookup"><span data-stu-id="5eba1-145">Tenants should be limited to managing their own resources.</span></span> <span data-ttu-id="5eba1-146">Nesses casos, você pode restringir quais parâmetros são expostos do cmdlet ou da função.</span><span class="sxs-lookup"><span data-stu-id="5eba1-146">For these cases, you can restrict which parameters are exposed from the cmdlet or function.</span></span>

```powershell
VisibleCmdlets = @{ Name = 'Restart-Computer'; Parameters = @{ Name = 'Name' }}
```

<span data-ttu-id="5eba1-147">Em cenários mais avançados, talvez você também precise restringir os valores que um usuário pode usar com esses parâmetros.</span><span class="sxs-lookup"><span data-stu-id="5eba1-147">In more advanced scenarios, you may also need to restrict the values a user may use with these parameters.</span></span> <span data-ttu-id="5eba1-148">As capacidades de função permitem que você defina um conjunto de valores ou um padrão de expressão regular que determina qual entrada é permitida.</span><span class="sxs-lookup"><span data-stu-id="5eba1-148">Role capabilities let you define a set of values or a regular expression pattern that determine what input is allowed.</span></span>

```powershell
VisibleCmdlets = @{ Name = 'Restart-Service'; Parameters = @{ Name = 'Name'; ValidateSet = 'Dns', 'Spooler' }},
                 @{ Name = 'Start-Website'; Parameters = @{ Name = 'Name'; ValidatePattern = 'HR_*' }}
```

> [!NOTE]
> <span data-ttu-id="5eba1-149">Os [parâmetros comuns do PowerShell](/powershell/module/microsoft.powershell.core/about/about_commonparameters) são sempre permitidos, mesmo que você restrinja os parâmetros disponíveis.</span><span class="sxs-lookup"><span data-stu-id="5eba1-149">The [common PowerShell parameters](/powershell/module/microsoft.powershell.core/about/about_commonparameters) are always allowed, even if you restrict the available parameters.</span></span>
> <span data-ttu-id="5eba1-150">Você não deve listá-los explicitamente no campo Parâmetros.</span><span class="sxs-lookup"><span data-stu-id="5eba1-150">You should not explicitly list them in the Parameters field.</span></span>

<span data-ttu-id="5eba1-151">A tabela a seguir descreve as várias maneiras que podem ser usadas para personalizar um cmdlet ou função visível.</span><span class="sxs-lookup"><span data-stu-id="5eba1-151">The table below describes the various ways you can customize a visible cmdlet or function.</span></span>
<span data-ttu-id="5eba1-152">Você pode combinar e fazer a correspondência de qualquer item abaixo no campo **VisibleCmdlets**.</span><span class="sxs-lookup"><span data-stu-id="5eba1-152">You can mix and match any of the below in the **VisibleCmdlets** field.</span></span>

|                                           <span data-ttu-id="5eba1-153">Exemplo</span><span class="sxs-lookup"><span data-stu-id="5eba1-153">Example</span></span>                                           |                                                             <span data-ttu-id="5eba1-154">Caso de uso</span><span class="sxs-lookup"><span data-stu-id="5eba1-154">Use case</span></span>                                                              |
| ------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------- |
| <span data-ttu-id="5eba1-155">`'My-Func'` ou `@{ Name = 'My-Func' }`</span><span class="sxs-lookup"><span data-stu-id="5eba1-155">`'My-Func'` or `@{ Name = 'My-Func' }`</span></span>                                                      | <span data-ttu-id="5eba1-156">Permite que o usuário execute `My-Func` sem quaisquer restrições nos parâmetros.</span><span class="sxs-lookup"><span data-stu-id="5eba1-156">Allows the user to run `My-Func` without any restrictions on the parameters.</span></span>                                                      |
| `'MyModule\My-Func'`                                                                        | <span data-ttu-id="5eba1-157">Permite que o usuário execute `My-Func` do módulo `MyModule` sem quaisquer restrições nos parâmetros.</span><span class="sxs-lookup"><span data-stu-id="5eba1-157">Allows the user to run `My-Func` from the module `MyModule` without any restrictions on the parameters.</span></span>                           |
| `'My-*'`                                                                                    | <span data-ttu-id="5eba1-158">Permite que o usuário execute qualquer cmdlet ou função com o verbo `My`.</span><span class="sxs-lookup"><span data-stu-id="5eba1-158">Allows the user to run any cmdlet or function with the verb `My`.</span></span>                                                                 |
| `'*-Func'`                                                                                  | <span data-ttu-id="5eba1-159">Permite que o usuário execute qualquer cmdlet ou função com o substantivo `Func`.</span><span class="sxs-lookup"><span data-stu-id="5eba1-159">Allows the user to run any cmdlet or function with the noun `Func`.</span></span>                                                               |
| `@{ Name = 'My-Func'; Parameters = @{ Name = 'Param1'}, @{ Name = 'Param2' }}`              | <span data-ttu-id="5eba1-160">Permite que o usuário execute `My-Func` com os parâmetros `Param1` e `Param2`.</span><span class="sxs-lookup"><span data-stu-id="5eba1-160">Allows the user to run `My-Func` with the `Param1` and `Param2` parameters.</span></span> <span data-ttu-id="5eba1-161">Qualquer valor pode ser fornecido para os parâmetros.</span><span class="sxs-lookup"><span data-stu-id="5eba1-161">Any value can be supplied to the parameters.</span></span>          |
| `@{ Name = 'My-Func'; Parameters = @{ Name = 'Param1'; ValidateSet = 'Value1', 'Value2' }}` | <span data-ttu-id="5eba1-162">Permite que o usuário execute `My-Func` com o parâmetro `Param1`.</span><span class="sxs-lookup"><span data-stu-id="5eba1-162">Allows the user to run `My-Func` with the `Param1` parameter.</span></span> <span data-ttu-id="5eba1-163">Somente "Value1" e "Value2" podem ser fornecidos ao parâmetro.</span><span class="sxs-lookup"><span data-stu-id="5eba1-163">Only "Value1" and "Value2" can be supplied to the parameter.</span></span>        |
| `@{ Name = 'My-Func'; Parameters = @{ Name = 'Param1'; ValidatePattern = 'contoso.*' }}`    | <span data-ttu-id="5eba1-164">Permite que o usuário execute `My-Func` com o parâmetro `Param1`.</span><span class="sxs-lookup"><span data-stu-id="5eba1-164">Allows the user to run `My-Func` with the `Param1` parameter.</span></span> <span data-ttu-id="5eba1-165">Qualquer valor começando com "contoso" pode ser fornecido ao parâmetro.</span><span class="sxs-lookup"><span data-stu-id="5eba1-165">Any value starting with "contoso" can be supplied to the parameter.</span></span> |

> [!WARNING]
> <span data-ttu-id="5eba1-166">Como práticas recomendadas de segurança, não é recomendável usar curingas ao definir cmdlets ou funções visíveis.</span><span class="sxs-lookup"><span data-stu-id="5eba1-166">For best security practices, it is not recommended to use wildcards when defining visible cmdlets or functions.</span></span> <span data-ttu-id="5eba1-167">Em vez disso, você deve listar explicitamente cada comando confiável para garantir que outros comandos que compartilham o mesmo esquema de nomenclatura não sejam acidentalmente autorizados.</span><span class="sxs-lookup"><span data-stu-id="5eba1-167">Instead, you should explicitly list each trusted command to ensure no other commands that share the same naming scheme are unintentionally authorized.</span></span>

<span data-ttu-id="5eba1-168">Não é possível aplicar um **ValidatePattern** e um **ValidateSet** ao mesmo cmdlet ou à mesma função.</span><span class="sxs-lookup"><span data-stu-id="5eba1-168">You can't apply both a **ValidatePattern** and **ValidateSet** to the same cmdlet or function.</span></span>

<span data-ttu-id="5eba1-169">Se você fizer isso, **ValidatePattern** substituirá **ValidateSet**.</span><span class="sxs-lookup"><span data-stu-id="5eba1-169">If you do, the **ValidatePattern** overrides the **ValidateSet**.</span></span>

<span data-ttu-id="5eba1-170">Para obter mais informações sobre **ValidatePattern**, confira [esta postagem no *Hey, Scripting Guy!*](https://devblogs.microsoft.com/scripting/validate-powershell-parameters-before-running-the-script/) e o conteúdo de referência [Expressões regulares do PowerShell](/powershell/module/microsoft.powershell.core/about/about_regular_expressions).</span><span class="sxs-lookup"><span data-stu-id="5eba1-170">For more information about **ValidatePattern**, check out [this *Hey, Scripting Guy!* post](https://devblogs.microsoft.com/scripting/validate-powershell-parameters-before-running-the-script/) and the [PowerShell Regular Expressions](/powershell/module/microsoft.powershell.core/about/about_regular_expressions) reference content.</span></span>

### <a name="allowing-external-commands-and-powershell-scripts"></a><span data-ttu-id="5eba1-171">Permitindo comandos externos e scripts do PowerShell</span><span class="sxs-lookup"><span data-stu-id="5eba1-171">Allowing external commands and PowerShell scripts</span></span>

<span data-ttu-id="5eba1-172">Para permitir que os usuários executem scripts do PowerShell (.ps1) e executáveis em uma sessão JEA, é necessário adicionar o caminho completo a cada programa no campo **VisibleExternalCommands**.</span><span class="sxs-lookup"><span data-stu-id="5eba1-172">To allow users to run executables and PowerShell scripts (.ps1) in a JEA session, you have to add the full path to each program in the **VisibleExternalCommands** field.</span></span>

```powershell
VisibleExternalCommands = 'C:\Windows\System32\whoami.exe', 'C:\Program Files\Contoso\Scripts\UpdateITSoftware.ps1'
```

<span data-ttu-id="5eba1-173">Sempre que possível, use funções ou cmdlets do PowerShell equivalentes aos executáveis externos que autorizar, pois você tem controle sobre os parâmetros permitidos com cmdlets e funções do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="5eba1-173">Where possible, to use PowerShell cmdlet or function equivalents for any external executables you authorize since you have control over the parameters allowed with PowerShell cmdlets and functions.</span></span>

<span data-ttu-id="5eba1-174">Muitos executáveis permitem que você leia o estado atual e, em seguida, altere-o fornecendo parâmetros diferentes.</span><span class="sxs-lookup"><span data-stu-id="5eba1-174">Many executables allow you to read the current state and then change it by providing different parameters.</span></span>

<span data-ttu-id="5eba1-175">Por exemplo, considere a função de um administrador de servidor de arquivos que gerencia os compartilhamentos de rede hospedados em um sistema.</span><span class="sxs-lookup"><span data-stu-id="5eba1-175">For example, consider the role of a file server admin that manages network shares hosted on a system.</span></span> <span data-ttu-id="5eba1-176">Uma maneira de gerenciar os compartilhamentos é usar `net share`.</span><span class="sxs-lookup"><span data-stu-id="5eba1-176">One way of managing shares is to use `net share`.</span></span> <span data-ttu-id="5eba1-177">No entanto, permitir o **net.exe** é perigoso, pois o usuário pode usar o comando para obter privilégios de administrador com `net group Administrators unprivilegedjeauser /add`.</span><span class="sxs-lookup"><span data-stu-id="5eba1-177">However, allowing **net.exe** is dangerous because the user could use the command to gain admin privileges with `net group Administrators unprivilegedjeauser /add`.</span></span> <span data-ttu-id="5eba1-178">Uma opção mais segura é permitir [Get-SmbShare](/powershell/module/smbshare/get-smbshare), que obtém o mesmo resultado, mas tem um escopo muito mais limitado.</span><span class="sxs-lookup"><span data-stu-id="5eba1-178">A more secure option is to allow [Get-SmbShare](/powershell/module/smbshare/get-smbshare), which achieves the same result but has a much more limited scope.</span></span>

<span data-ttu-id="5eba1-179">Ao disponibilizar comandos externos aos usuários em uma sessão JEA, sempre especifique o caminho completo para o executável.</span><span class="sxs-lookup"><span data-stu-id="5eba1-179">When making external commands available to users in a JEA session, always specify the complete path to the executable.</span></span> <span data-ttu-id="5eba1-180">Isso impede a execução de programas nomeados da mesma forma e potencialmente mal-intencionados localizados em outros lugares no sistema.</span><span class="sxs-lookup"><span data-stu-id="5eba1-180">This prevents the execution of similarly named and potentially malicious programs located elsewhere on the system.</span></span>

### <a name="allowing-access-to-powershell-providers"></a><span data-ttu-id="5eba1-181">Permitindo acesso aos provedores do PowerShell</span><span class="sxs-lookup"><span data-stu-id="5eba1-181">Allowing access to PowerShell providers</span></span>

<span data-ttu-id="5eba1-182">Por padrão, nenhum provedor de PowerShell está disponível em sessões JEA.</span><span class="sxs-lookup"><span data-stu-id="5eba1-182">By default, no PowerShell providers are available in JEA sessions.</span></span> <span data-ttu-id="5eba1-183">Isso reduz o risco de divulgação de informações confidenciais e definições de configuração ao usuário que está se conectando.</span><span class="sxs-lookup"><span data-stu-id="5eba1-183">This reduces the risk of sensitive information and configuration settings being disclosed to the connecting user.</span></span>

<span data-ttu-id="5eba1-184">Quando necessário, você pode permitir acesso aos provedores do PowerShell usando o comando `VisibleProviders`.</span><span class="sxs-lookup"><span data-stu-id="5eba1-184">When necessary, you can allow access to the PowerShell providers using the `VisibleProviders` command.</span></span> <span data-ttu-id="5eba1-185">Para obter uma lista completa dos provedores, execute o `Get-PSProvider`.</span><span class="sxs-lookup"><span data-stu-id="5eba1-185">For a full list of providers, run `Get-PSProvider`.</span></span>

```powershell
VisibleProviders = 'Registry'
```

<span data-ttu-id="5eba1-186">Para tarefas simples que exigem acesso ao sistema de arquivos, ao Registro, ao repositório de certificados ou a outros provedores confidenciais, considere escrever uma função personalizada que funcione com o provedor em nome do usuário.</span><span class="sxs-lookup"><span data-stu-id="5eba1-186">For simple tasks that require access to the file system, registry, certificate store, or other sensitive providers, consider writing a custom function that works with the provider on the user's behalf.</span></span> <span data-ttu-id="5eba1-187">As funções, os cmdlets e os programas externos disponíveis em uma sessão JEA não estão sujeitos às mesmas restrições que o JEA.</span><span class="sxs-lookup"><span data-stu-id="5eba1-187">The functions, cmdlets, and external programs available in a JEA session aren't subject to the same constraints as JEA.</span></span> <span data-ttu-id="5eba1-188">Eles podem acessar qualquer provedor por padrão.</span><span class="sxs-lookup"><span data-stu-id="5eba1-188">They can access any provider by default.</span></span> <span data-ttu-id="5eba1-189">Considere também o uso da [unidade de usuário](session-configurations.md#user-drive) quando for necessário copiar arquivos bidirecionalmente em um ponto de extremidade JEA.</span><span class="sxs-lookup"><span data-stu-id="5eba1-189">Also consider using the [user drive](session-configurations.md#user-drive) when copying files to or from a JEA endpoint is required.</span></span>

### <a name="creating-custom-functions"></a><span data-ttu-id="5eba1-190">Criando funções personalizadas</span><span class="sxs-lookup"><span data-stu-id="5eba1-190">Creating custom functions</span></span>

<span data-ttu-id="5eba1-191">Você pode criar funções personalizadas em um arquivo de capacidade de função para simplificar tarefas complexas para os seus usuários finais.</span><span class="sxs-lookup"><span data-stu-id="5eba1-191">You can author custom functions in a role capability file to simplify complex tasks for your end users.</span></span> <span data-ttu-id="5eba1-192">As funções personalizadas também são úteis quando você precisar de lógica de validação avançada para valores de parâmetro de cmdlet.</span><span class="sxs-lookup"><span data-stu-id="5eba1-192">Custom functions are also useful when you require advanced validation logic for cmdlet parameter values.</span></span> <span data-ttu-id="5eba1-193">É possível escrever funções simples no campo **FunctionDefinitions**:</span><span class="sxs-lookup"><span data-stu-id="5eba1-193">You can write simple functions in the **FunctionDefinitions** field:</span></span>

```powershell
VisibleFunctions = 'Get-TopProcess'

FunctionDefinitions = @{
    Name = 'Get-TopProcess'

    ScriptBlock = {
        param($Count = 10)

        Get-Process | Sort-Object -Property CPU -Descending |
            Microsoft.PowerShell.Utility\Select-Object -First $Count
    }
}
```

> [!IMPORTANT]
> <span data-ttu-id="5eba1-194">Não se esqueça de adicionar o nome de suas funções personalizadas no campo **VisibleFunctions** para que elas possam ser executadas pelos usuários JEA.</span><span class="sxs-lookup"><span data-stu-id="5eba1-194">Don't forget to add the name of your custom functions to the **VisibleFunctions** field so they can be run by the JEA users.</span></span>

<span data-ttu-id="5eba1-195">O corpo (bloco de script) de funções personalizadas é executado no modo de idioma padrão do sistema e não está sujeito às restrições de linguagem do JEA.</span><span class="sxs-lookup"><span data-stu-id="5eba1-195">The body (script block) of custom functions runs in the default language mode for the system and isn't subject to JEA's language constraints.</span></span> <span data-ttu-id="5eba1-196">Isso significa que as funções podem acessar o sistema de arquivos e o Registro e executar comandos que não estavam visíveis no arquivo de capacidade de função.</span><span class="sxs-lookup"><span data-stu-id="5eba1-196">This means that functions can access the file system and registry, and run commands that weren't made visible in the role capability file.</span></span> <span data-ttu-id="5eba1-197">Tome cuidado para evitar a execução de código arbitrário ao usar parâmetros.</span><span class="sxs-lookup"><span data-stu-id="5eba1-197">Take care to avoid running arbitrary code when using parameters.</span></span> <span data-ttu-id="5eba1-198">Evite o redirecionamento da entrada do usuário diretamente para cmdlets como `Invoke-Expression`.</span><span class="sxs-lookup"><span data-stu-id="5eba1-198">Avoid piping user input directly into cmdlets like `Invoke-Expression`.</span></span>

<span data-ttu-id="5eba1-199">No exemplo acima, observe que o FQMN (nome do módulo totalmente qualificado) `Microsoft.PowerShell.Utility\Select-Object` foi usado em vez da abreviação `Select-Object`.</span><span class="sxs-lookup"><span data-stu-id="5eba1-199">In the above example, notice that the fully qualified module name (FQMN) `Microsoft.PowerShell.Utility\Select-Object` was used instead of the shorthand `Select-Object`.</span></span>
<span data-ttu-id="5eba1-200">As funções definidas em arquivos de capacidade de função ainda estão sujeitas ao escopo das sessões JEA, que inclui as funções de proxy que o JEA cria para restringir os comandos existentes.</span><span class="sxs-lookup"><span data-stu-id="5eba1-200">Functions defined in role capability files are still subject to the scope of JEA sessions, which includes the proxy functions JEA creates to constrain existing commands.</span></span>

<span data-ttu-id="5eba1-201">Por padrão, o `Select-Object` é um cmdlet restrito em todas as sessões JEA que não permite a seleção de propriedades arbitrárias em objetos.</span><span class="sxs-lookup"><span data-stu-id="5eba1-201">By default, `Select-Object` is a constrained cmdlet in all JEA sessions that doesn't allow the selection of arbitrary properties on objects.</span></span> <span data-ttu-id="5eba1-202">Para usar o `Select-Object` irrestrito em funções, é necessário solicitar explicitamente a implementação completa usando o FQMN.</span><span class="sxs-lookup"><span data-stu-id="5eba1-202">To use the unconstrained `Select-Object` in functions, you must explicitly request the full implementation using the FQMN.</span></span> <span data-ttu-id="5eba1-203">Qualquer cmdlet restrito em uma sessão JEA tem as mesmas restrições quando invocado em uma função.</span><span class="sxs-lookup"><span data-stu-id="5eba1-203">Any constrained cmdlet in a JEA session has the same constraints when invoked from a function.</span></span> <span data-ttu-id="5eba1-204">Para obter mais informações, confira [about_Command_Precedence](/powershell/module/microsoft.powershell.core/about/about_command_precedence).</span><span class="sxs-lookup"><span data-stu-id="5eba1-204">For more information, see [about_Command_Precedence](/powershell/module/microsoft.powershell.core/about/about_command_precedence).</span></span>

<span data-ttu-id="5eba1-205">Se você estiver escrevendo várias funções personalizadas, será mais conveniente colocá-las em um módulo de script do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="5eba1-205">If you're writing several custom functions, it's more convenient to put them in a PowerShell script module.</span></span> <span data-ttu-id="5eba1-206">Em seguida, você poderá tornar essas funções visíveis na sessão JEA usando o campo **VisibleFunctions**, assim como faria com módulos internos e de terceiros.</span><span class="sxs-lookup"><span data-stu-id="5eba1-206">You make those functions visible in the JEA session using the **VisibleFunctions** field like you would with built-in and third-party modules.</span></span>

<span data-ttu-id="5eba1-207">Para que o preenchimento da guia funcione corretamente em sessões JEA, você deve incluir a função interna `tabexpansion2` na lista **VisibleFunctions**.</span><span class="sxs-lookup"><span data-stu-id="5eba1-207">For tab completion to work properly in JEA sessions you must include the built-in function `tabexpansion2` in the **VisibleFunctions** list.</span></span>

## <a name="make-the-role-capabilities-available-to-a-configuration"></a><span data-ttu-id="5eba1-208">Disponibilize os recursos de função para uma configuração</span><span class="sxs-lookup"><span data-stu-id="5eba1-208">Make the role capabilities available to a configuration</span></span>

<span data-ttu-id="5eba1-209">Antes do PowerShell 6, para o PowerShell encontrar um arquivo de recurso de função, ele deveria estar armazenado em uma pasta **RoleCapabilities** em um módulo do PowerShell.</span><span class="sxs-lookup"><span data-stu-id="5eba1-209">Prior to PowerShell 6, for PowerShell to find a role capability file it must be stored in a **RoleCapabilities** folder in a PowerShell module.</span></span> <span data-ttu-id="5eba1-210">O módulo poderia ser armazenado em qualquer pasta, inclusive na variável de ambiente `$env:PSModulePath`. No entanto, você não deveria colocá-lo em `$env:SystemRoot\System32` ou em uma pasta em que usuários não confiáveis podem modificar os arquivos.</span><span class="sxs-lookup"><span data-stu-id="5eba1-210">The module can be stored in any folder included in the `$env:PSModulePath` environment variable, however you shouldn't place it in `$env:SystemRoot\System32` or a folder where untrusted users could modify the files.</span></span>

<span data-ttu-id="5eba1-211">O exemplo a seguir cria um módulo de script do PowerShell chamado **ContosoJEA** no caminho `$env:ProgramFiles` para hospedar o arquivo de recursos de funções.</span><span class="sxs-lookup"><span data-stu-id="5eba1-211">The following example creates a PowerShell script module called **ContosoJEA** in the `$env:ProgramFiles` path to host the role capabilities file.</span></span>

```powershell
# Create a folder for the module
$modulePath = Join-Path $env:ProgramFiles "WindowsPowerShell\Modules\ContosoJEA"
New-Item -ItemType Directory -Path $modulePath

# Create an empty script module and module manifest.
# At least one file in the module folder must have the same name as the folder itself.
New-Item -ItemType File -Path (Join-Path $modulePath "ContosoJEAFunctions.psm1")
New-ModuleManifest -Path (Join-Path $modulePath "ContosoJEA.psd1") -RootModule "ContosoJEAFunctions.psm1"

# Create the RoleCapabilities folder and copy in the PSRC file
$rcFolder = Join-Path $modulePath "RoleCapabilities"
New-Item -ItemType Directory $rcFolder
Copy-Item -Path .\MyFirstJEARole.psrc -Destination $rcFolder
```

<span data-ttu-id="5eba1-212">Para obter mais informações sobre módulos do PowerShell, confira [Noções básicas sobre um módulo do PowerShell](/powershell/scripting/developer/windows-powershell).</span><span class="sxs-lookup"><span data-stu-id="5eba1-212">For more information about PowerShell modules, see [Understanding a PowerShell Module](/powershell/scripting/developer/windows-powershell).</span></span>

<span data-ttu-id="5eba1-213">Após o PowerShell 6, a propriedade **RoleDefinitions** foi adicionada ao arquivo de configuração de sessão.</span><span class="sxs-lookup"><span data-stu-id="5eba1-213">Starting in PowerShell 6, the **RoleDefinitions** property was added to the session configuration file.</span></span> <span data-ttu-id="5eba1-214">Essa propriedade permite especificar o local de um arquivo de configuração de função para você definir uma função.</span><span class="sxs-lookup"><span data-stu-id="5eba1-214">This property lets you specify the location of a role configuration file for your role definition.</span></span> <span data-ttu-id="5eba1-215">Veja exemplos em [New-PSSessionConfigurationFile](/powershell/module/microsoft.powershell.core/new-pssessionconfigurationfile).</span><span class="sxs-lookup"><span data-stu-id="5eba1-215">See the examples in [New-PSSessionConfigurationFile](/powershell/module/microsoft.powershell.core/new-pssessionconfigurationfile).</span></span>

## <a name="updating-role-capabilities"></a><span data-ttu-id="5eba1-216">Atualizando recursos de função</span><span class="sxs-lookup"><span data-stu-id="5eba1-216">Updating role capabilities</span></span>

<span data-ttu-id="5eba1-217">Você pode editar um arquivo de capacidade de função para atualizar as configurações a qualquer momento.</span><span class="sxs-lookup"><span data-stu-id="5eba1-217">You can edit a role capability file to update the settings at any time.</span></span> <span data-ttu-id="5eba1-218">Qualquer nova sessão JEA iniciada depois que a capacidade de função foi atualizado refletirá os recursos revisados.</span><span class="sxs-lookup"><span data-stu-id="5eba1-218">Any new JEA sessions started after the role capability has been updated will reflect the revised capabilities.</span></span>

<span data-ttu-id="5eba1-219">É por isso que é tão importante controlar o acesso à pasta de recursos de função.</span><span class="sxs-lookup"><span data-stu-id="5eba1-219">This is why controlling access to the role capabilities folder is so important.</span></span> <span data-ttu-id="5eba1-220">Apenas administradores altamente confiáveis devem ter a permissão de alterar os arquivos de capacidade de função.</span><span class="sxs-lookup"><span data-stu-id="5eba1-220">Only highly trusted administrators should be allowed to change role capability files.</span></span> <span data-ttu-id="5eba1-221">Se um usuário não confiável puder alterar os arquivos de capacidade de função, ele poderá, com facilidade, fornecer a si próprio o acesso aos cmdlets que permitem elevar seus privilégios.</span><span class="sxs-lookup"><span data-stu-id="5eba1-221">If an untrusted user can change role capability files, they can easily give themselves access to cmdlets that allow them to elevate their privileges.</span></span>

<span data-ttu-id="5eba1-222">Para os administradores que desejam bloquear o acesso às capacidades de função, verifique se a Sistema Local tem acesso de leitura aos arquivos de capacidade de função e aos módulos nesses arquivos.</span><span class="sxs-lookup"><span data-stu-id="5eba1-222">For administrators looking to lock down access to the role capabilities, ensure Local System has read access to the role capability files and containing modules.</span></span>

## <a name="how-role-capabilities-are-merged"></a><span data-ttu-id="5eba1-223">Como os recursos de função são mesclados</span><span class="sxs-lookup"><span data-stu-id="5eba1-223">How role capabilities are merged</span></span>

<span data-ttu-id="5eba1-224">Os usuários obtêm acesso a todas as capacidades de função correspondentes no [arquivo de configuração de sessão](session-configurations.md) quando entram em uma sessão JEA.</span><span class="sxs-lookup"><span data-stu-id="5eba1-224">Users are granted access to all matching role capabilities in the [session configuration file](session-configurations.md) when they enter a JEA session.</span></span> <span data-ttu-id="5eba1-225">O JEA tenta fornecer ao usuário o conjunto mais permissivo de comandos permitido por uma das funções.</span><span class="sxs-lookup"><span data-stu-id="5eba1-225">JEA tries to give the user the most permissive set of commands allowed by any of the roles.</span></span>

### <a name="visiblecmdlets-and-visiblefunctions"></a><span data-ttu-id="5eba1-226">VisibleCmdlets e VisibleFunctions</span><span class="sxs-lookup"><span data-stu-id="5eba1-226">VisibleCmdlets and VisibleFunctions</span></span>

<span data-ttu-id="5eba1-227">A lógica mais complexa de mesclagem afeta cmdlets e funções, que podem ter seus parâmetros e valores de parâmetro limitados no JEA.</span><span class="sxs-lookup"><span data-stu-id="5eba1-227">The most complex merge logic affects cmdlets and functions, which can have their parameters and parameter values limited in JEA.</span></span>

<span data-ttu-id="5eba1-228">As regras são as seguintes:</span><span class="sxs-lookup"><span data-stu-id="5eba1-228">The rules are as follows:</span></span>

1. <span data-ttu-id="5eba1-229">Se um cmdlet só se tornar visível em uma função, ele ficará visível para o usuário com qualquer restrição de parâmetro aplicável.</span><span class="sxs-lookup"><span data-stu-id="5eba1-229">If a cmdlet is only made visible in one role, it is visible to the user with any applicable parameter constraints.</span></span>
2. <span data-ttu-id="5eba1-230">Se um cmdlet se tornar visível em mais de uma função e cada função tiver as mesmas restrições sobre o cmdlet, o cmdlet ficará visível para o usuário com essas restrições.</span><span class="sxs-lookup"><span data-stu-id="5eba1-230">If a cmdlet is made visible in more than one role, and each role has the same constraints on the cmdlet, the cmdlet is visible to the user with those constraints.</span></span>
3. <span data-ttu-id="5eba1-231">Se um cmdlet se tornar visível em mais de uma função e cada função permitir um conjunto diferente de parâmetros, o cmdlet e todos os parâmetros definidos em cada função ficarão visíveis ao usuário.</span><span class="sxs-lookup"><span data-stu-id="5eba1-231">If a cmdlet is made visible in more than one role, and each role allows a different set of parameters, the cmdlet and all the parameters defined across every role are visible to the user.</span></span>
   <span data-ttu-id="5eba1-232">Se uma função não tiver restrições sobre os parâmetros, todos os parâmetros serão permitidos.</span><span class="sxs-lookup"><span data-stu-id="5eba1-232">If one role doesn't have constraints on the parameters, all parameters are allowed.</span></span>
4. <span data-ttu-id="5eba1-233">Se uma função definir um conjunto ou um padrão de validação para um parâmetro de cmdlet e a outra função permitir o parâmetro, mas não restringir os valores do parâmetro, o conjunto ou o padrão de validação será ignorado.</span><span class="sxs-lookup"><span data-stu-id="5eba1-233">If one role defines a validate set or validate pattern for a cmdlet parameter, and the other role allows the parameter but does not constrain the parameter values, the validate set or pattern is ignored.</span></span>
5. <span data-ttu-id="5eba1-234">Se um conjunto de validação for definido para o mesmo parâmetro de cmdlet em mais de uma função, todos os valores de todos os conjuntos de validação serão permitidos.</span><span class="sxs-lookup"><span data-stu-id="5eba1-234">If a validate set is defined for the same cmdlet parameter in more than one role, all values from all validate sets are allowed.</span></span>
6. <span data-ttu-id="5eba1-235">Se um padrão de validação for definido para o mesmo parâmetro de cmdlet em mais de uma função, qualquer valor que corresponda a um dos padrões será permitido.</span><span class="sxs-lookup"><span data-stu-id="5eba1-235">If a validate pattern is defined for the same cmdlet parameter in more than one role, any values that match any of the patterns are allowed.</span></span>
7. <span data-ttu-id="5eba1-236">Se um conjunto de validação for definido em uma ou mais funções e um padrão de validação for definido em outra função para o mesmo parâmetro de cmdlet, o conjunto de validação será ignorado e a regra (6) se aplica aos padrões de validação restantes.</span><span class="sxs-lookup"><span data-stu-id="5eba1-236">If a validate set is defined in one or more roles, and a validate pattern is defined in another role for the same cmdlet parameter, the validate set is ignored and rule (6) applies to the remaining validate patterns.</span></span>

<span data-ttu-id="5eba1-237">O exemplo abaixo mostra como as funções são mescladas de acordo com essas regras:</span><span class="sxs-lookup"><span data-stu-id="5eba1-237">Below is an example of how roles are merged according to these rules:</span></span>

```powershell
# Role A Visible Cmdlets
$roleA = @{
    VisibleCmdlets = 'Get-Service',
                     @{ Name = 'Restart-Service';
                        Parameters = @{ Name = 'DisplayName'; ValidateSet = 'DNS Client' } }
}

# Role B Visible Cmdlets
$roleB = @{
    VisibleCmdlets = @{ Name = 'Get-Service';
                        Parameters = @{ Name = 'DisplayName'; ValidatePattern = 'DNS.*' } },
                     @{ Name = 'Restart-Service';
                        Parameters = @{ Name = 'DisplayName'; ValidateSet = 'DNS Server' } }
}

# Resulting permissions for a user who belongs to both role A and B
# - The constraint in role B for the DisplayName parameter on Get-Service
#   is ignored because of rule #4
# - The ValidateSets for Restart-Service are merged because both roles use
#   ValidateSet on the same parameter per rule #5
$mergedAandB = @{
    VisibleCmdlets = 'Get-Service',
                     @{ Name = 'Restart-Service';
                        Parameters = @{ Name = 'DisplayName'; ValidateSet = 'DNS Client', 'DNS Server' } }
}
```

### <a name="visibleexternalcommands-visiblealiases-visibleproviders-scriptstoprocess"></a><span data-ttu-id="5eba1-238">VisibleExternalCommands, VisibleAliases, VisibleProviders e ScriptsToProcess</span><span class="sxs-lookup"><span data-stu-id="5eba1-238">VisibleExternalCommands, VisibleAliases, VisibleProviders, ScriptsToProcess</span></span>

<span data-ttu-id="5eba1-239">Todos os outros campos do arquivo de capacidade de função são adicionados a um conjunto cumulativo de comandos externos permitidos, aliases, provedores e scripts de inicialização.</span><span class="sxs-lookup"><span data-stu-id="5eba1-239">All other fields in the role capability file are added to a cumulative set of allowable external commands, aliases, providers, and startup scripts.</span></span> <span data-ttu-id="5eba1-240">Um comando, alias, provedor ou script disponível em uma capacidade de função está disponível para o usuário JEA.</span><span class="sxs-lookup"><span data-stu-id="5eba1-240">Any command, alias, provider, or script available in one role capability is available to the JEA user.</span></span>

<span data-ttu-id="5eba1-241">Verifique com cuidado se o conjunto combinado de provedores de uma capacidade de função e cmdlets/funções/comandos de outra não permitem aos usuários o acesso não intencional aos recursos do sistema.</span><span class="sxs-lookup"><span data-stu-id="5eba1-241">Be careful to ensure that the combined set of providers from one role capability and cmdlets/functions/commands from another don't allow users unintentional access to system resources.</span></span>
<span data-ttu-id="5eba1-242">Por exemplo, se uma função permite o cmdlet `Remove-Item` e outra função permite o provedor `FileSystem`, haverá um risco de um usuário JEA excluir arquivos arbitrários no seu computador.</span><span class="sxs-lookup"><span data-stu-id="5eba1-242">For example, if one role allows the `Remove-Item` cmdlet and another allows the `FileSystem` provider, you are at risk of a JEA user deleting arbitrary files on your computer.</span></span> <span data-ttu-id="5eba1-243">Encontre mais informações sobre como identificar as permissões efetivas dos usuários no artigo [Auditoria do JEA](audit-and-report.md).</span><span class="sxs-lookup"><span data-stu-id="5eba1-243">Additional information about identifying users' effective permissions can be found in the [auditing JEA](audit-and-report.md) article.</span></span>

## <a name="next-steps"></a><span data-ttu-id="5eba1-244">Próximas etapas</span><span class="sxs-lookup"><span data-stu-id="5eba1-244">Next steps</span></span>

[<span data-ttu-id="5eba1-245">Criar um arquivo de configuração de sessão</span><span class="sxs-lookup"><span data-stu-id="5eba1-245">Create a session configuration file</span></span>](session-configurations.md)
